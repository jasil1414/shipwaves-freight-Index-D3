// Code goes here

var app = angular.module('plunker', ['nvd3']);

app.controller('MainCtrl', function($scope) {
  $scope.options = {
    chart: {
      type: 'cumulativeLineChart',
      height: 500,
      margin: {
        top: 20,
        right: 20,
        bottom: 60,
        left: 65
      },
      x: function(d) {
        return d[0];
      },
      y: function(d) {
        return d[1];
      },
      // average: function(d) { return d.mean/100; },

      color: d3.scale.category10().range(),
      duration: 300,
      useInteractiveGuideline: true,
      clipVoronoi: false,

      xAxis: {
        axisLabel: 'Time',
        tickFormat: function(d) {
          return d3.time.format('%B %y')(new Date(d))
        },
        showMaxMin: false,
        // staggerLabels: true
      },

      yAxis: {
        axisLabel: 'Shipwaves Freight Index',
        tickFormat: function(d) {
          return d3.format('0.2f')(d + 100);
        },
        axisLabelDistance: 6,
      }
    }
  };


  $scope.data = [{
    "key": "Africa",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -16.483163974100606
      ],
      [
        1480530599999, -20.847316275811494
      ],
      [
        1483208999999, -15.456893295612701
      ],
      [
        1485887399999, -15.532618017899793
      ],
      [
        1488306599999,
        8.700423012482005
      ],
      [
        1490984999999,
        34.06335179551601
      ],
      [
        1493576999999,
        44.94445741735299
      ],
      [
        1496255399999,
        44.858369911556
      ],
      [
        1498847399999,
        30.186508581309994
      ],
      [
        1501525799999,
        21.027249923865995
      ],
      [
        1504204199999,
        24.347634261536
      ]
    ]
  }, {
    "key": "Mediterranean",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -23.011285327368498
      ],
      [
        1480530599999, -24.7795910886543
      ],
      [
        1483208999999, -28.822801408237098
      ],
      [
        1485887399999, -27.0044109867125
      ],
      [
        1488306599999,
        33.634215759515
      ],
      [
        1490984999999,
        56.867787522876
      ],
      [
        1493576999999,
        43.579489816743006
      ],
      [
        1496255399999,
        28.242620287959
      ],
      [
        1498847399999,
        9.014697949452
      ],
      [
        1501525799999,
        2.952768969188
      ],
      [
        1504204199999,
        2.0055291800619983
      ]
    ]
  }, {
    "key": "China",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -82.3769329515507
      ],
      [
        1480530599999, -81.7162197859673
      ],
      [
        1483208999999, -78.8164942843032
      ],
      [
        1485887399999, -69.6560068487644
      ],
      [
        1488306599999, -55.9443423039307
      ],
      [
        1490984999999, -39.0121593839646
      ],
      [
        1493576999999, -27.838522179412493
      ],
      [
        1496255399999, -31.876041958400293
      ],
      [
        1498847399999, -36.5060699736634
      ],
      [
        1501525799999, -49.8802879802948
      ],
      [
        1504204199999, -47.4101121759051
      ]
    ]
  }, {
    "key": "Australia",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -9.730156529367505
      ],
      [
        1480530599999, -5.014331437672695
      ],
      [
        1483208999999,
        0.8228272364419951
      ],
      [
        1485887399999,
        6.189114186452002
      ],
      [
        1488306599999,
        36.21106201342499
      ],
      [
        1490984999999,
        1.9269289572669948
      ],
      [
        1493576999999,
        1.8973752624820008
      ],
      [
        1496255399999,
        5.156932691226004
      ],
      [
        1498847399999,
        0.6244153266769956
      ],
      [
        1501525799999, -0.44332880285790566
      ],
      [
        1504204199999, -2.6312374604303983
      ]
    ]
  }, {
    "key": "Europe",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -12.697665315109901
      ],
      [
        1480530599999, -19.293868617852993
      ],
      [
        1483208999999, -26.653446249722407
      ],
      [
        1485887399999, -34.2457064606772
      ],
      [
        1488306599999,
        26.137465714824003
      ],
      [
        1490984999999,
        74.69533258631401
      ],
      [
        1493576999999,
        59.20477027644699
      ],
      [
        1496255399999,
        40.03102202897401
      ],
      [
        1498847399999,
        39.896595551656986
      ],
      [
        1501525799999,
        16.874157302590007
      ],
      [
        1504204199999,
        11.574242386888002
      ]
    ]
  }, {
    "key": "Middle East",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999,
        3.2735880475640045
      ],
      [
        1480530599999,
        3.4129996874369937
      ],
      [
        1483208999999,
        78.16369834556801
      ],
      [
        1485887399999,
        61.818080353428996
      ],
      [
        1488306599999,
        69.786891670807
      ],
      [
        1490984999999,
        90.35062053027099
      ],
      [
        1493576999999,
        100.426759355184
      ],
      [
        1496255399999,
        109.357116764544
      ],
      [
        1498847399999,
        94.02869688515099
      ],
      [
        1501525799999,
        105.60536675936001
      ],
      [
        1504204199999,
        102.24013462976399
      ]
    ]
  }, {
    "key": "USA",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -10.508551373885695
      ],
      [
        1480530599999, -7.0028339129656985
      ],
      [
        1483208999999, -7.481635352822295
      ],
      [
        1485887399999, -11.401646687040696
      ],
      [
        1488306599999,
        15.448636387690996
      ],
      [
        1490984999999,
        27.674546425200006
      ],
      [
        1493576999999,
        36.01451468030899
      ],
      [
        1496255399999,
        31.20962677474901
      ],
      [
        1498847399999,
        30.327366343606997
      ],
      [
        1501525799999,
        18.218579349861997
      ],
      [
        1504204199999,
        29.870258559467004
      ]
    ]
  }, {
    "key": "SEA",
    "values": [
      [
        1475260199999,
        0
      ],
      [
        1477938599999, -55.5928035906153
      ],
      [
        1480530599999, -54.1147386270127
      ],
      [
        1483208999999, -50.7454096608465
      ],
      [
        1485887399999, -39.5751568996861
      ],
      [
        1488306599999, -36.079830335415
      ],
      [
        1490984999999, -12.025216384887898
      ],
      [
        1493576999999, -10.3076646313569
      ],
      [
        1496255399999, -10.385596218807194
      ],
      [
        1498847399999, -8.367491354793898
      ],
      [
        1501525799999, -47.9858655009019
      ],
      [
        1504204199999, -32.257352729327195
      ]
    ]
  }]

});